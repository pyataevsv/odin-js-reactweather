(this["webpackJsonpodin-js-reactasyncweather"]=this["webpackJsonpodin-js-reactasyncweather"]||[]).push([[0],{13:function(e,t,a){},7:function(e,t,a){e.exports=a(8)},8:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),l=a(6),c=a(5),s=a(0),i=a.n(s),o=a(4),m=a.n(o),u=(a(13),function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var r;Object(n.a)(this,a),(r=t.call(this,e)).onInputChane=function(e){var t={city:e.target.value};r.setState(t)},r.getWeatherData=function(){r.setState({load:"load"}),fetch("https://us1.locationiq.com/v1/search.php?key=302f0d75c67b72&q="+r.state.city+"&format=json").then((function(e){if(console.log(e),e.ok)return e.json();throw new Error(e.status)})).then((function(e){return console.log(e),fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+e[0].lat+"&lon="+e[0].lon+"&appid=a19641b44afdf6e04adb1c8f74e13496&units=metric")})).then((function(e){if(console.log(e),e.ok)return e.json();throw new Error(e.status)})).then((function(e){console.log(e),r.fetched=!0,r.refreshWeather(e)})).catch((function(e){return console.log(e)})).finally((function(){r.setState({load:"hide"})}))},r.state={city:"Moscow",load:"hide"};JSON.parse(window.localStorage.getItem("weatherbuf"));return r.fetched=!1,console.log(r.state.weather),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.getWeatherData()}},{key:"refreshWeather",value:function(e){var t={weather:e};this.setState(t),console.log(this.state)}},{key:"render",value:function(){if(this.fetched){for(var e="http://openweathermap.org/img/wn/"+this.state.weather.current.weather[0].icon+"@2x.png",t=this.state.weather.hourly.map((function(e,t){return"http://openweathermap.org/img/wn/"+e.weather[0].icon+".png"})),a=[],n=[],r=0;r<7;r++){var l=i.a.createElement("td",{key:r},i.a.createElement("div",null,i.a.createElement("img",{src:t[r+1],alt:"icon"})),i.a.createElement("div",{className:"hourly-tmp"},Math.round(this.state.weather.hourly[r+1].temp),"\u2103"));a.push(l);var c=i.a.createElement("th",{key:r},new Date(Date.now()+36e5*(r+1)).getHours(),":00");n.push(c)}var s=this.state.weather.daily.map((function(e,t){var a;switch(new Date(Date.now()).getDay()+t>7?new Date(Date.now()).getDay()+t-7:new Date(Date.now()).getDay()+t){case 1:a="Mon";break;case 2:a="Tue";break;case 3:a="Wed";break;case 4:a="Thu";break;case 5:a="Fri";break;case 6:a="Sat";break;case 7:a="Sun"}return 0!==t?i.a.createElement("div",{className:"daily-item",key:t},i.a.createElement("div",null,a),i.a.createElement("div",null,i.a.createElement("img",{src:"http://openweathermap.org/img/wn/"+e.weather[0].icon+".png",alt:"icon"}),i.a.createElement("div",null,Math.round(e.temp.day),"\u2103"))):""}));return i.a.createElement("div",{className:"weather-app"},i.a.createElement("div",{className:"current-box"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"input"}),i.a.createElement("input",{type:"text",id:"input",value:this.state.city,onChange:this.onInputChane}),i.a.createElement("button",{onClick:this.getWeatherData},"go"),i.a.createElement("span",{className:this.state.load},i.a.createElement("div",{className:"box"},i.a.createElement("div",{className:"it m1"}),i.a.createElement("div",{className:"it m2"}),i.a.createElement("div",{className:"it m3"}),i.a.createElement("div",{className:"it m4"}),i.a.createElement("div",{className:"it m5"})))),i.a.createElement("div",{className:"current-main"},i.a.createElement("div",null,i.a.createElement("img",{src:e,alt:"icon"})," ",i.a.createElement("br",null),i.a.createElement("div",{className:"cur-wthdics"},this.state.weather.current.weather[0].description)),i.a.createElement("div",{className:"current-temp"},Math.round(this.state.weather.current.temp),"\u2103",i.a.createElement("div",{className:"feels-like"},"(feels like ",Math.round(this.state.weather.current.feels_like),"\u2103)"))),i.a.createElement("div",{className:"current-sec"},i.a.createElement("div",{className:"current-details"},i.a.createElement("div",null,"Wind speen:"),i.a.createElement("div",null," ",this.state.weather.current.wind_speed," m/sec"),i.a.createElement("div",null,"Pressure: "),i.a.createElement("div",null,this.state.weather.current.pressure," hPa"),i.a.createElement("div",null,"Cloudiness: "),i.a.createElement("div",null,this.state.weather.current.clouds,"%")))),i.a.createElement("div",{className:"hourly-box"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,n),i.a.createElement("tr",null,a)))),i.a.createElement("div",{className:"daily-box"},s))}return i.a.createElement("div",{className:"weather-app"},i.a.createElement("div",{className:"current-box"},"Fetching data...",i.a.createElement("div",{class:"box"},i.a.createElement("div",{class:"it m1"}),i.a.createElement("div",{class:"it m2"}),i.a.createElement("div",{class:"it m3"}),i.a.createElement("div",{class:"it m4"}),i.a.createElement("div",{class:"it m5"}))))}}]),a}(i.a.Component));m.a.render(i.a.createElement(u,null),document.getElementById("root"))}},[[7,1,2]]]);
//# sourceMappingURL=main.4ab7e77f.chunk.js.map